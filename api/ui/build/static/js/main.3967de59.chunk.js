(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{180:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},286:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(53),s=n.n(r),o=(n(180),n(181),n(49)),i=n(31),u=n(2),l=n(292),j=n(171),b=n(297),d=(n(182),n(54)),p=(n(183),n(8)),f=function(e){var t=e.name,n=e.url,a=e.color;return Object(p.jsx)(d.a,{id:"button-link",style:{backgroundColor:a||"#1995ad"},children:Object(p.jsx)(o.b,{to:n,children:t})})},O=function(){var e=Object(i.f)(),t=Object(a.useState)(),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),d=Object(u.a)(s,2),O=d[0],h=d[1];Object(a.useEffect)((function(){setInterval((function(){h(JSON.parse(localStorage.getItem("user"))||null),r(JSON.parse(localStorage.getItem("customUser"))||null)}),1e3)}));var m=function(){e.push("/")};return Object(p.jsxs)(l.a,{children:[Object(p.jsxs)("div",{id:"user-info",children:[c?Object(p.jsx)(j.a,{size:"large",src:"".concat("http://127.0.0.1:8000").concat(c.photo),onClick:m}):Object(p.jsx)(j.a,{size:"large",icon:Object(p.jsx)(b.a,{}),onClick:m}),(null===c||void 0===c?void 0:c.first_name)?Object(p.jsx)("div",{children:Object(p.jsx)(o.b,{to:"/profile",children:c.first_name})}):Object(p.jsx)("div",{children:Object(p.jsx)(o.b,{to:"/login",children:"Log in"})})]}),c&&Object(p.jsxs)("div",{id:"relations",children:[Object(p.jsx)(f,{name:"Subscriptions",url:"/subscriptions/".concat(c.user)}),Object(p.jsx)(f,{name:"Followers",url:"/followers/".concat(c.user)}),O&&Object(p.jsx)("div",{id:"logout",onClick:function(){localStorage.removeItem("user"),localStorage.removeItem("customUser"),m()},children:"Log out"})]})]})},h=n(18),m=n.n(h),x=n(27),v=n(34),g=n.n(v),w=(n(279),n(291)),S=w.a.Meta,y=function(e){var t=e.user;return Object(p.jsx)(w.a,{style:{width:300},children:Object(p.jsx)(o.b,{to:"/user/".concat(t.user),children:Object(p.jsx)(S,{avatar:Object(p.jsx)(j.a,{src:"".concat("http://127.0.0.1:8000").concat(t.photo),size:"large"}),title:t.first_name,description:t.description})})})},I=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"))||null;(function(){var t=Object(x.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("".concat("http://127.0.0.1:8000","/users/"));case 2:n=t.sent,a=n.data,c(e?a.filter((function(t){return t.user!==e.id})):a);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()().catch((function(e){return console.log(e)}))}),[]),Object(p.jsx)("div",{id:"users",children:null===n||void 0===n?void 0:n.map((function(e){return Object(p.jsx)(y,{user:e},e.id)}))})},C=n(290),k=n(296),N=(n(280),n(73)),J=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(u.a)(r,2),l=s[0],j=s[1],b=Object(a.useState)(),f=Object(u.a)(b,2),O=f[0],h=f[1],v=Object(i.f)();Object(a.useEffect)((function(){h(JSON.parse(localStorage.getItem("user"))||null)}),[]),Object(a.useEffect)((function(){O&&v.push("/")}),[v,O]);var w=function(){var e=Object(x.a)(m.a.mark((function e(){var t,a,c,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"Content-type":"application/json"}},e.prev=1,e.next=4,g.a.post("".concat("http://127.0.0.1:8000","/login/"),{username:n,password:l},t);case 4:return a=e.sent,c=a.data,localStorage.setItem("user",JSON.stringify(c)),h(c),e.next=10,g.a.get("".concat("http://127.0.0.1:8000","/custom-user/").concat(c.id,"/"));case 10:r=e.sent,s=r.data,localStorage.setItem("customUser",JSON.stringify(s)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),N.a.error({title:"Something went wrong",content:e.t0.response.data.detail});case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"login",children:[Object(p.jsxs)(C.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:w,autoComplete:"off",children:[Object(p.jsx)(C.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],onChange:function(e){return c(e.target.value)},children:Object(p.jsx)(k.a,{})}),Object(p.jsx)(C.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],onChange:function(e){return j(e.target.value)},children:Object(p.jsx)(k.a.Password,{})}),Object(p.jsx)(C.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(d.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}),Object(p.jsx)(o.b,{to:"/register",children:"Are you a new user? Register here"})]})},E=(n(281),function(e){var t=e.match,n=Object(a.useState)([]),c=Object(u.a)(n,2),r=c[0],s=c[1],o=t.params.id;return Object(a.useEffect)((function(){var e=!1;return function(){var t=Object(x.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("".concat("http://127.0.0.1:8000","/subscriptions/").concat(o,"/"));case 2:n=t.sent,a=n.data,e||s(a);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()().catch((function(e){return console.log(e)})),function(){return e=!0}}),[o]),Object(p.jsx)("div",{id:"subscriptions",children:null===r||void 0===r?void 0:r.map((function(e){return Object(p.jsx)(y,{user:e},e.id)}))})}),U=(n(282),function(e){var t=e.match,n=Object(a.useState)([]),c=Object(u.a)(n,2),r=c[0],s=c[1],o=t.params.id;return Object(a.useEffect)((function(){var e=!1;return function(){var t=Object(x.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("".concat("http://127.0.0.1:8000","/followers/").concat(o,"/"));case 2:n=t.sent,a=n.data,e||s(a);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()().catch((function(e){return console.log(e)})),function(){return e=!0}}),[o]),Object(p.jsx)("div",{id:"followers",children:null===r||void 0===r?void 0:r.map((function(e){return Object(p.jsx)(y,{user:e},e.id)}))})}),P=n(293),V=(n(283),function(e){var t=e.url;return Object(p.jsx)(P.a,{className:"user-image",height:250,width:300,src:"".concat("http://127.0.0.1:8000").concat(t)})}),_=(n(284),function(e,t){return t.followers.includes(e)}),z=function(e,t){return t.subscriptions.includes(e)},F=function(e){var t=e.match,n=JSON.parse(localStorage.getItem("user")),c=JSON.parse(localStorage.getItem("customUser")),r=Object(a.useState)(),s=Object(u.a)(r,2),o=s[0],i=s[1],l=t.params.id,j=Object(a.useState)(!1),b=Object(u.a)(j,2),O=b[0],h=b[1],v=Object(a.useState)(!1),w=Object(u.a)(v,2),S=w[0],y=w[1];Object(a.useEffect)(Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,function(){var e=Object(x.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat("http://127.0.0.1:8000","/user/").concat(l,"/"));case 2:n=e.sent,a=n.data,h(_(null===c||void 0===c?void 0:c.id,a)),y(z(null===c||void 0===c?void 0:c.id,a)),t||i(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().catch((function(e){return console.log(e)})),e.abrupt("return",(function(){return t=!0}));case 4:case"end":return e.stop()}}),e)}))),[l,O]);var I=function(){var e=Object(x.a)(m.a.mark((function e(){var t,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:"Bearer ".concat(n.token)}},e.next=3,g.a.post("".concat("http://127.0.0.1:8000","/update-relationship/").concat(l,"/"),{},t);case 3:a=e.sent,r=a.data,h((function(){return _(c.id,r)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"info",children:o&&Object(p.jsxs)("div",{id:"main-info",children:[Object(p.jsx)(V,{url:o.photo}),Object(p.jsxs)("div",{id:"important",children:[Object(p.jsxs)("div",{id:"subscriptions-followers",children:[Object(p.jsx)("div",{children:o.first_name}),Object(p.jsxs)("div",{children:[Object(p.jsx)(f,{name:"".concat(o.first_name,"'s subscriptions"),url:"/subscriptions/".concat(o.user),color:"#a7a8ae"}),Object(p.jsx)(f,{name:"".concat(o.first_name,"'s followers"),url:"/followers/".concat(o.user),color:"#a7a8ae"})]})]}),Object(p.jsx)("div",{id:"location",children:o.location}),O&&S&&Object(p.jsx)("div",{children:o.contact}),Object(p.jsx)("div",{children:o.description}),o.id!==c.id&&(O&&!0===O?Object(p.jsx)("div",{className:"subscribe",children:Object(p.jsx)(d.a,{onClick:I,children:"Unsubscribe"})}):Object(p.jsx)("div",{className:"subscribe",children:Object(p.jsx)(d.a,{onClick:I,children:"Subscribe"})}))]})]})})},q=n(295),B=n(289),M=n(294),A=n(120),L=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(u.a)(r,2),o=s[0],i=s[1];Object(a.useEffect)((function(){i(JSON.parse(localStorage.getItem("user"))||null)}),[]),Object(a.useEffect)((function(){o&&function(){var e=Object(x.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat("http://127.0.0.1:8000","/custom-user/").concat(o.id,"/"));case 2:t=e.sent,n=t.data,c(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().catch((function(e){return console.log(e)}))}),[o]);var l=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a,c,r,s,i,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.location,c=t.sex,r=t.budget,s=t.description,i=t.contact,u={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.prev=2,e.next=5,g.a.put("".concat("http://127.0.0.1:8000","/profile/update/"),{username:n,location:a,sex:c,budget:r,description:s,contact:i},u);case 5:N.a.success({content:"User info successfully updated"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),N.a.error({title:"Something went wrong",content:e.t0.response.data.detail});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{children:n&&Object(p.jsxs)(C.a,{labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",initialValues:{size:"default"},size:"default",onFinish:l,children:[Object(p.jsx)(C.a.Item,{label:"Name",name:"username",children:Object(p.jsx)(k.a,{defaultValue:n.first_name})}),Object(p.jsx)(C.a.Item,{label:"Location",name:"location",children:Object(p.jsx)(k.a,{defaultValue:n.location})}),Object(p.jsx)(C.a.Item,{label:"Sex",name:"sex",children:Object(p.jsxs)(q.a,{defaultValue:n.sex,children:[Object(p.jsx)(q.a.Option,{value:"Female",children:"Female"}),Object(p.jsx)(q.a.Option,{value:"Male",children:"Male"}),Object(p.jsx)(q.a.Option,{value:"Not chosen",children:"Not chosen"})]})}),Object(p.jsx)(C.a.Item,{label:"Contact",name:"contact",children:Object(p.jsx)(k.a,{defaultValue:n.contact})}),Object(p.jsx)(C.a.Item,{label:"Date of birth",name:"date_of_birth",children:Object(p.jsx)(B.a,{})}),Object(p.jsx)(C.a.Item,{label:"Budget",name:"budget",children:Object(p.jsx)(M.a,{defaultValue:Number(n.budget)})}),Object(p.jsx)(C.a.Item,{label:"Description",name:"description",children:Object(p.jsx)(A.a,{defaultValue:n.description})}),Object(p.jsx)(C.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(d.a,{type:"primary",htmlType:"submit",children:"Update"})})]})})},T=(n(285),function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(u.a)(r,2),o=s[0],l=s[1],j=Object(a.useState)(""),b=Object(u.a)(j,2),f=b[0],O=b[1],h=Object(a.useState)(),v=Object(u.a)(h,2),w=v[0],S=v[1],y=Object(i.f)();Object(a.useEffect)((function(){S(JSON.parse(localStorage.getItem("user"))||null)}),[]),Object(a.useEffect)((function(){w&&y.push("/")}),[y,w]);var I=function(){var e=Object(x.a)(m.a.mark((function e(){var t,a,c,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"Content-type":"application/json"}},e.prev=1,e.next=4,g.a.post("".concat("http://127.0.0.1:8000","/register/"),{username:n,email:o,password:f},t);case 4:return a=e.sent,c=a.data,localStorage.setItem("user",JSON.stringify(c)),S(c),console.log(c),e.next=11,g.a.get("".concat("http://127.0.0.1:8000","/custom-user/").concat(c.id,"/"));case 11:r=e.sent,s=r.data,localStorage.setItem("customUser",JSON.stringify(s)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),N.a.error({title:"Something went wrong",content:e.t0.response.data.detail});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"registration",children:Object(p.jsxs)(C.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:I,autoComplete:"off",children:[Object(p.jsx)(C.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],onChange:function(e){return c(e.target.value)},children:Object(p.jsx)(k.a,{})}),Object(p.jsx)(C.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}],onChange:function(e){return l(e.target.value)},children:Object(p.jsx)(k.a,{})}),Object(p.jsx)(C.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],onChange:function(e){return O(e.target.value)},children:Object(p.jsx)(k.a.Password,{})}),Object(p.jsx)(C.a.Item,{wrapperCol:{offset:8,span:16},children:Object(p.jsx)(d.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})})});var D=function(){return Object(p.jsxs)(o.a,{children:[Object(p.jsx)(O,{}),Object(p.jsxs)(i.c,{children:[Object(p.jsx)(i.a,{exact:!0,path:"/",component:I}),Object(p.jsx)(i.a,{path:"/login",component:J}),Object(p.jsx)(i.a,{path:"/register",component:T}),Object(p.jsx)(i.a,{path:"/subscriptions/:id",component:E}),Object(p.jsx)(i.a,{path:"/followers/:id",component:U}),Object(p.jsx)(i.a,{path:"/user/:id",component:F}),Object(p.jsx)(i.a,{path:"/profile/",component:L})]})]})};s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(D,{})}),document.getElementById("root"))}},[[286,1,2]]]);
//# sourceMappingURL=main.3967de59.chunk.js.map